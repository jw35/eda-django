{% extends 'eda/base.html' %}

{% load static %}

{% block title %}{{ tower.place }} - {{ tower.dedication }}{% endblock %}

{% block content %}

<div class="row justify-content-center">

    <div class="col-auto">

<h1>{{ tower.place }} - {{ tower.dedication }}</h1>

<table class="table table-responsive table-sm">

	<tbody>

	{% if tower.fulldedication %}
	<tr>
		<td class="fw-bold">Full Dedication</td>
		<td>{{ tower.full_dedication }}</td>
	</tr>
	{% endif %}
    {% if tower.nickname %}
	<tr>
		<td class="fw-bold">Nickname</td>
		<td>{{ tower.nickname }}</td>
	</tr>
	{% endif %}
	<tr>
		<td class="fw-bold">Ringing Status</td>
		<td>{{ tower.get_ringing_status_display }}</td>
	</tr>
	<tr>
		<td class="fw-bold">Service ringing</td>
		<td>{{ tower.service }}</td>
	</tr>
	<tr>
		<td class="fw-bold">Practice ringing</td>
		<td>{{ tower.practice }}</td>
	</tr>
	<tr>
		<td class="fw-bold">Number of bells</td>
		<td>{{ tower.bells }}</td>
	</tr>
	<tr>
		<td class="fw-bold">Type of ring</td>
		<td>{{ tower.get_ring_type_display }}</td>
	</tr>
	<tr>
		<td class="fw-bold">Weight</td>
		<td>{{ tower.weight }}</td>
	</tr>
	<tr>
		<td class="fw-bold">Note</td>
		<td>{{ tower.note }}</td>
	</tr>
	<tr>
		<td class="fw-bold">Ground floor?</td>
		<td>{{ tower.gf|yesno|capfirst }}</td>
	</tr>
	<tr class="text-start">
		<td class="fw-bold">County</td>
		<td>{{ tower.get_county_display }}</td>
	</tr>
	<tr>
		<td class="fw-bold">PostCode</td>
		<td>{{ tower.postcode }}</td>
	</tr>
	<tr>
		<td class="fw-bold">Latitide, Longitude</td>
		<td>{{ tower.lat }}, {{ tower.lng }} (<a href="https://www.google.com/maps/search/?api=1&query={{ tower.lat }},{{ tower.lng }}">Google</a>, <a href="https://www.openstreetmap.org/?mlat={{ tower.lat}}&mlon={{ tower.lng }}&zoom=16">OpenStreetMap</a>)</td>
	</tr>
	<tr>
		<td class="fw-bold">OS Grid</td>
		<td>{{ tower.os_grid }}</td>
	</tr>
	<tr>
		<td class="fw-bold">Primary contact</td>
		<td>
	    {% if tower.primary_contact.publish %}
		<i>{{ tower.primary_contact.as_links }}{% if tower.primary_contact.role == 'BL' %} (Bells Only){% endif %}{% if tower.primary_contact.role == 'BA' %} (Band Only){% endif %}<br>
		{% endif %}
	    </td>
	</tr>
	{% if tower.other_contacts %}
	<tr>
		<td class="fw-bold">Other contacts</td>
		<td>
	    {% for contact in tower.other_contacts %}
	    {% if contact.publish %}
		<i>{{ contact.get_role_display }}</i>: {{ contact.as_links }}<br>
		{% endif %}
		{% endfor %}
	    </td>
	</tr>
	{% endif %}
    <tr>
    	<td class="fw-bold">Websites</td>
    	<td>
    	{% for website in tower.website_set.all %}
    	{% if website.link_text %}
    	<a href="{{ website.website }}">{{ website.link_text }}</a><br>
    	{% else %}
    	<a href="{{ website.website }}">{{ website.website }}</a><br>
    	{% endif %}
    	{% endfor %}
    	{% if tower.dove_link %}
		<a href="{{ tower.dove_link }}">Dove</a><br>
		<a href="{{ tower.bellboard_link }}">BellBoard</a><br>
		{% endif %}
        {% if tower.felstead_link %}
        <a href="{{ tower.felstead_link }}">Felsted database</a><br>
        {% endif %}
	</tr>
	<tr>
		<td class="fw-bold">EDA Tower ID</td>
		<td><a href="{% url 'tower_detail' tower.pk %}">{{ tower.pk }}</a></td>
	</tr>
	<tr>
		<td class="fw-bold">EDA District</td>
		<td>{{ tower.get_district_display }}</td>
	</tr>
	<tr>
		<td class="fw-bold">EDA peals</td>
		<td>
		{% if tower.peals %}
		{{ tower.peals }}
		{% else %}
		None
		{% endif %}
	    </td>
	</tr>
	<tr>
		<td class="fw-bold">In EDA Annual Report?</td>
		<td>{{ tower.report|yesno|capfirst }}</td>
	</tr>
	<tr>
		<td class="fw-bold">Notes</td>
		<td>{{ tower.notes }}</td>
	</tr>
	{% if tower.long_notes %}
    <tr>
		<td class="fw-bold">Longer notes</td>
		<td>{{ tower.long_notes }}</td>
	</tr>
	{% endif %}

</tbody>

</table>

{% for photo in tower.photo_set.all %}
<p><a href="{{ photo.image.url }}">
<br>{{ photo.img_tag }}</a>
<br>({{ photo.height }}h x {{ photo.width }}w)
{% if photo.credit %}
Photo: <i>{{ photo.credit }}</i>
{% endif %}
</p>
{% endfor %}

<p>This tower as <a href="{% url 'tower_geojson' tower.pk %}">machine-readable GeoJSON</a></p>

{% if user_can_edit %}
<p>[Admin only: <a href="{% url 'admin:tower_database_tower_change' tower.pk %}">Edit</a>]</p>
{% endif %}

</div>

</div>


{% endblock %}
